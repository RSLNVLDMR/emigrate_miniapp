#!/bin/bash

echo "üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
if [[ -n $(git status --porcelain) ]]; then
    echo "‚ùå –ï—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°–Ω–∞—á–∞–ª–∞ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏—Ö:"
    git status
    exit 1
fi

# –ü—É—à–∏–º –Ω–∞ GitHub
echo "üì§ –ü—É—à–∏–º –Ω–∞ GitHub..."
git push origin main

if [ $? -eq 0 ]; then
    echo "‚úÖ –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—à–µ–Ω –Ω–∞ GitHub"
    echo ""
    echo "üåê –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ:"
    echo "1. –ó–∞–π—Ç–∏ –Ω–∞ https://vercel.com"
    echo "2. –ù–∞–π—Ç–∏ –ø—Ä–æ–µ–∫—Ç emigrate_miniapp"
    echo "3. –ù–∞–∂–∞—Ç—å 'Redeploy' –∏–ª–∏ 'Deploy'"
    echo ""
    echo "üîë –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è OPENAI_API_KEY:"
    echo "   Settings ‚Üí Environment Variables ‚Üí OPENAI_API_KEY"
    echo ""
    echo "üì± –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ –Ω–∞ GitHub"
    exit 1
fi
