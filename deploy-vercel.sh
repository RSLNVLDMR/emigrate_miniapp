#!/bin/bash

echo "üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel —á–µ—Ä–µ–∑ API..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
if [[ -n $(git status --porcelain) ]]; then
    echo "‚ùå –ï—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°–Ω–∞—á–∞–ª–∞ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏—Ö:"
    git status
    exit 1
fi

echo "üì§ –ü—É—à–∏–º –Ω–∞ GitHub..."
git push origin main

if [ $? -eq 0 ]; then
    echo "‚úÖ –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—à–µ–Ω –Ω–∞ GitHub"
    echo ""
    echo "üåê –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é:"
    echo ""
    echo "1Ô∏è‚É£ –ó–ê–ô–î–ò–¢–ï –ù–ê https://vercel.com"
    echo "2Ô∏è‚É£ –ù–ê–ô–î–ò–¢–ï –ü–†–û–ï–ö–¢ emigrate_miniapp"
    echo "3Ô∏è‚É£ –ù–ê–ñ–ú–ò–¢–ï 'Redeploy' –∏–ª–∏ 'Deploy'"
    echo ""
    echo "üîë –î–û–ë–ê–í–¨–¢–ï –ü–ï–†–ï–ú–ï–ù–ù–£–Æ –û–ö–†–£–ñ–ï–ù–ò–Ø:"
    echo "   Settings ‚Üí Environment Variables"
    echo "   Name: OPENAI_API_KEY"
    echo "   Value: [–í–ê–®_OPENAI_API_–ö–õ–Æ–ß]"
    echo ""
    echo "üì± –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø –î–û–ö–£–ú–ï–ù–¢–û–í –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨!"
    echo ""
    echo "üîç –ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:"
    echo "   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å vercel.json"
    echo "   - –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ api/ –∏ templates/"
    echo "   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ –Ω–∞ GitHub"
    exit 1
fi
